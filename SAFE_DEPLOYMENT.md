# üîí –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–µ–ø–ª–æ–π –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö

## ‚úÖ –ß—Ç–æ —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. **–£–±—Ä–∞–Ω–∞ `Base.metadata.create_all()`** - —Ç–∞–±–ª–∏—Ü—ã –±–æ–ª—å—à–µ –Ω–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ
2. **–î–æ–±–∞–≤–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π** - –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ Alembic
3. **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ö–µ–ª–ø–µ—Ä—ã** - –∫–æ–¥ –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç

## üöÄ –ü—Ä–æ—Ü–µ—Å—Å –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ Alembic
- –¢–∞–±–ª–∏—Ü—ã –Ω–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—é—Ç—Å—è
- –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- –ù–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –ü—Ä–æ—Å—Ç–æ –¥–µ–ª–∞–π—Ç–µ –æ–±—ã—á–Ω—ã–π –¥–µ–ø–ª–æ–π (push –≤ GitHub –∏–ª–∏ —á–µ—Ä–µ–∑ Railway)
2. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç backend
3. –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
4. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è!

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ:

#### –ß–µ—Ä–µ–∑ Railway CLI:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Railway CLI
npm i -g @railway/cli

# –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å
railway login

# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ø—Ä–æ–µ–∫—Ç—É
railway link

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
railway run alembic upgrade head
```

#### –ß–µ—Ä–µ–∑ Railway Dashboard:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à Backend Service
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Deployments**
3. –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
4. –ï—Å–ª–∏ –µ—Å—Ç—å –æ–ø—Ü–∏—è **Shell** –∏–ª–∏ **Console** - –æ—Ç–∫—Ä–æ–π—Ç–µ –µ—ë
5. –í—ã–ø–æ–ª–Ω–∏—Ç–µ: `alembic upgrade head`

## üìù –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π

–ö–æ–≥–¥–∞ –≤—ã –∏–∑–º–µ–Ω—è–µ—Ç–µ –º–æ–¥–µ–ª–∏ (–¥–æ–±–∞–≤–ª—è–µ—Ç–µ –ø–æ–ª—è, —Ç–∞–±–ª–∏—Ü—ã –∏ —Ç.–¥.):

### –õ–æ–∫–∞–ª—å–Ω–æ:

```bash
cd backend

# –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é
alembic revision --autogenerate -m "–æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –≤ backend/alembic/versions/
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –ª–æ–∫–∞–ª—å–Ω–æ
alembic upgrade head
```

### –ù–∞ Railway:

1. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏ –∑–∞–ø—É—à—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ GitHub
2. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç
3. –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. –ò–ª–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ CLI (—Å–º. –≤—ã—à–µ)

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

### ‚úÖ –ú–û–ñ–ù–û:
- ‚úÖ –î–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏
- ‚úÖ –î–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- ‚úÖ –î–æ–±–∞–≤–ª—è—Ç—å –∏–Ω–¥–µ–∫—Å—ã
- ‚úÖ –ò–∑–º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–¥–ª—è –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π)
- ‚úÖ –î–æ–±–∞–≤–ª—è—Ç—å nullable –∫–æ–ª–æ–Ω–∫–∏

### ‚ùå –ù–ï–õ–¨–ó–Ø –±–µ–∑ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏:
- ‚ùå –£–¥–∞–ª—è—Ç—å –∫–æ–ª–æ–Ω–∫–∏ (–¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã!)
- ‚ùå –ò–∑–º–µ–Ω—è—Ç—å —Ç–∏–ø —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–ª–æ–Ω–æ–∫ (–º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–∫–∞–º)
- ‚ùå –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞—Ç—å –∫–æ–ª–æ–Ω–∫–∏ (–ª—É—á—à–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∏ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ)
- ‚ùå –£–¥–∞–ª—è—Ç—å —Ç–∞–±–ª–∏—Ü—ã

### üîß –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å/–∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É:

1. –°–æ–∑–¥–∞–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –≤—Ä—É—á–Ω—É—é:
```bash
alembic revision -m "remove column_name from table_name"
```

2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏:
```python
def upgrade():
    # –°–Ω–∞—á–∞–ª–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
    # –ó–∞—Ç–µ–º —É–¥–∞–ª–∏—Ç–µ –∫–æ–ª–æ–Ω–∫—É
    op.drop_column('table_name', 'column_name')

def downgrade():
    # –î–æ–±–∞–≤—å—Ç–µ –∫–æ–ª–æ–Ω–∫—É –æ–±—Ä–∞—Ç–Ω–æ
    op.add_column('table_name', sa.Column('column_name', sa.String()))
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### –ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –¥–µ–ø–ª–æ–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–ù–µ—Ç –ª–∏ `Base.metadata.create_all()` –≤ –∫–æ–¥–µ:**
   ```bash
   grep -r "create_all" backend/app/main.py
   ```
   –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ: `# Base.metadata.create_all(bind=engine)`

2. **–ï—Å—Ç—å –ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
   - –ï—Å–ª–∏ –≤—ã –∏–∑–º–µ–Ω–∏–ª–∏ –º–æ–¥–µ–ª–∏ - —Å–æ–∑–¥–∞–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ª–æ–∫–∞–ª—å–Ω–æ:**
   ```bash
   alembic upgrade head
   ```

## üêõ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ—Ç–µ—Ä—è–ª–∏—Å—å?

### –ï—Å–ª–∏ —ç—Ç–æ —Ç–æ–ª—å–∫–æ —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:

1. **–ù–ï –¥–µ–ª–∞–π—Ç–µ –±–æ–ª—å—à–µ –¥–µ–ø–ª–æ–µ–≤!**
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway - —Ç–∞–º –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ
3. –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å backup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–≥–æ

### –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞:

1. **–î–µ–ª–∞–π—Ç–µ backup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –±–æ–ª—å—à–∏–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏:**
   - Railway –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —ç–∫—Å–ø–æ—Ä—Ç–∞ PostgreSQL
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `pg_dump`

2. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –∫–æ–ø–∏–∏ –±–∞–∑—ã:**
   - –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
   - –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç–∞–º
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ—Ç–µ—Ä—è–ª–∏—Å—å

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ:
- `Base.metadata.create_all()` –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ú–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ö–µ–ª–ø–µ—Ä—ã –¥–æ–±–∞–≤–ª—è—é—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏

### ‚ö†Ô∏è –ú–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ö–µ–ª–ø–µ—Ä—ã –≤ main.py:

–í `main.py` –µ—Å—Ç—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏:
- `invite_code` –≤ `shared_budgets`
- `shared_budget_id` –≤ `accounts` –∏ `categories`
- `is_favorite` –≤ `categories`
- `roadmap` –≤ `goals`
- –ò –¥—Ä—É–≥–∏–µ...

**–≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ** - –∫–æ–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫ –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –∏ –Ω–µ —É–¥–∞–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ.

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π workflow

1. **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:**
   - –ò–∑–º–µ–Ω–∏—Ç–µ –º–æ–¥–µ–ª–∏ –≤ `backend/app/models/`
   - –°–æ–∑–¥–∞–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é: `alembic revision --autogenerate -m "–æ–ø–∏—Å–∞–Ω–∏–µ"`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
   - –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ: `alembic upgrade head`

2. **–î–µ–ø–ª–æ–π:**
   - –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è: `git add . && git commit -m "..." && git push`
   - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç
   - –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∏ "Running database migrations..."
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –º–µ—Å—Ç–µ

---

**–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ:** –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Base.metadata.create_all()` –≤ production! –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ Alembic.

