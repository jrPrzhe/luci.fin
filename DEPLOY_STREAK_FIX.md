# üöÄ –î–µ–ø–ª–æ–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–π–∫–∞ (streak_days) –Ω–∞ –ø—Ä–æ–¥

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. **–§—É–Ω–∫—Ü–∏—è `update_streak()` –≤ `gamification.py`**:
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å timezone (–≤—Å–µ –¥–∞—Ç—ã –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è –∫ UTC)
   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `last_entry_date` –∫–∞–∫ `datetime` —Å timezone
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–∞—Ç –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–¥—Å—á–µ—Ç–∞ —Å—Ç—Ä–∞–π–∫–∞

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `datetime.utcnow()` –≤ `transactions.py`**:
   - –ó–∞–º–µ–Ω–µ–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –º–µ—Ç–æ–¥ –Ω–∞ `datetime.now(timezone.utc)`

## üìã –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

- ‚úÖ `backend/app/api/v1/gamification.py` - —Ñ—É–Ω–∫—Ü–∏—è `update_streak()`
- ‚úÖ `backend/app/api/v1/transactions.py` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `datetime.now(timezone.utc)`

## üöÄ –®–∞–≥–∏ –¥–ª—è –¥–µ–ø–ª–æ—è

### –®–∞–≥ 1: –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
cd finance-manager
git add backend/app/api/v1/gamification.py backend/app/api/v1/transactions.py
git commit -m "Fix streak_days calculation: normalize dates to UTC timezone

- Fix update_streak() to properly handle timezone-aware datetimes
- Replace datetime.utcnow() with datetime.now(timezone.utc)
- Ensure last_entry_date is saved as datetime with UTC timezone
- Fix issue where streak shows '1 days' after 2 consecutive days"
```

### –®–∞–≥ 2: –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ GitHub

```bash
git push origin main
```

### –®–∞–≥ 3: –î–æ–∂–¥–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è –≤ Railway

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç push –≤ `main` –≤–µ—Ç–∫—É –∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- –û–±—ã—á–Ω–æ –∑–∞–Ω–∏–º–∞–µ—Ç 2-5 –º–∏–Ω—É—Ç
- Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç backend
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è (–∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤ –∫–æ–¥–µ)

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ–ø–ª–æ–π

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Railway Dashboard:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [railway.app](https://railway.app)
   - –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Backend Service** ‚Üí **Deployments**

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:**
   - –ü–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å–ø–µ—à–Ω—ã–º (–∑–µ–ª–µ–Ω—ã–π —Å—Ç–∞—Ç—É—Å)
   - –í –ª–æ–≥–∞—Ö –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ **Logs** –≤ Railway
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ backend –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∏:
     - `[STARTUP] Starting application import...`
     - `[STARTUP] Application ready!`

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–°–æ–∑–¥–∞–π—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é —Å–µ–≥–æ–¥–Ω—è:**
   - –°—Ç—Ä–∞–π–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `1 –¥–µ–Ω—å –ø–æ–¥—Ä—è–¥`

2. **–°–æ–∑–¥–∞–π—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –∑–∞–≤—Ç—Ä–∞ (—Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å):**
   - –°—Ç—Ä–∞–π–∫ –¥–æ–ª–∂–µ–Ω —É–≤–µ–ª–∏—á–∏—Ç—å—Å—è –¥–æ `2 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥` ‚úÖ
   - (–†–∞–Ω—å—à–µ –æ—Å—Ç–∞–≤–∞–ª—Å—è `1 –¥–µ–Ω—å –ø–æ–¥—Ä—è–¥` ‚ùå)

3. **–°–æ–∑–¥–∞–π—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –Ω–∞ —Ç—Ä–µ—Ç–∏–π –¥–µ–Ω—å:**
   - –°—Ç—Ä–∞–π–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `3 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥` ‚úÖ

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

- **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É –∫–æ—Ç–æ—Ä—ã—Ö —Å—Ç—Ä–∞–π–∫ "–∑–∞—Å—Ç—Ä—è–ª" –Ω–∞ 1, —Å—Ç—Ä–∞–π–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—Å—è –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–∞ –Ω–æ–≤—ã–π –¥–µ–Ω—å
- **–ù–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–π**: –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤ –∫–æ–¥–µ, –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è
- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ, –Ω–µ –ª–æ–º–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ

## üîç –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π:

```bash
git revert HEAD
git push origin main
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ API:

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
curl -X GET "https://your-backend.railway.app/api/v1/gamification/status" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–µ `streak_days` –≤ –æ—Ç–≤–µ—Ç–µ.

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è —Å—Ç—Ä–∞–π–∫ –±—É–¥–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å—Å—è –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.






