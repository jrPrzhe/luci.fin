# Проверка и настройка файрвола

Если `ufw` не установлен, это нормально. Проверьте, какой файрвол используется или пропустите этот шаг.

## Проверка файрвола

### Вариант 1: UFW (Uncomplicated Firewall)

```bash
# Проверка установки
which ufw

# Если не установлен, можно установить (опционально)
apt install ufw -y
ufw allow 5432/tcp
ufw status
```

### Вариант 2: iptables (стандартный файрвол Linux)

```bash
# Проверка правил iptables
iptables -L -n | grep 5432

# Если порт не открыт, добавьте правило
iptables -A INPUT -p tcp --dport 5432 -j ACCEPT

# Сохраните правила (если используется iptables-persistent)
apt install iptables-persistent -y
iptables-save > /etc/iptables/rules.v4
```

### Вариант 3: firewalld (CentOS/RHEL)

```bash
# Проверка
systemctl status firewalld

# Если активен
firewall-cmd --permanent --add-port=5432/tcp
firewall-cmd --reload
```

### Вариант 4: Файрвол не настроен

Если файрвол не настроен, порт может быть уже открыт по умолчанию. Проверьте подключение с вашего локального компьютера.

## Проверка доступности порта

```bash
# Проверка, слушает ли PostgreSQL на порту 5432
netstat -tlnp | grep 5432
# или
ss -tlnp | grep 5432

# Проверка извне (с другого компьютера)
# telnet 195.43.142.121 5432
```

## Если файрвол не настроен

Если на сервере нет файрвола или он не настроен, PostgreSQL должен быть доступен извне (если провайдер не блокирует порты на уровне сети).

**Важно:** Убедитесь, что:
1. PostgreSQL настроен на прослушивание всех адресов (`listen_addresses = '*'`)
2. В `pg_hba.conf` добавлено правило для удаленного доступа
3. Провайдер не блокирует порт 5432 на уровне сети

## Рекомендация

Для production сервера рекомендуется:
1. Установить и настроить файрвол
2. Ограничить доступ по IP-адресу в `pg_hba.conf` (вместо `0.0.0.0/0`)
3. Использовать VPN или SSH туннель для подключения

Но для начала можно пропустить настройку файрвола и проверить подключение напрямую.







