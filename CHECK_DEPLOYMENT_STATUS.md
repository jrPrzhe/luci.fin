# ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –¥–µ–ø–ª–æ—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

**‚úÖ –î–ê, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ!** –í `main.py` (—Å—Ç—Ä–æ–∫–∏ 71-103) –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:

```python
if railway_env or railway_project or not skip_migrations:
    print("[STARTUP] Running migrations...")
    # ... –ø—Ä–∏–º–µ–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

**–£—Å–ª–æ–≤–∏—è:**
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ Railway (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç `RAILWAY_ENVIRONMENT` –∏–ª–∏ `RAILWAY_PROJECT_ID`)
- ‚úÖ –ò–ª–∏ –µ—Å–ª–∏ `SKIP_MIGRATIONS` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
- ‚úÖ –ü—Ä–∏–º–µ–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å—Ç–∞—Ä—Ç–µ backend

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –¥–µ–ø–ª–æ—è

### –®–∞–≥ 1: –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏ –∑–∞–ø—É—à–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
git status

# –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
git add .
git commit -m "Add analytics system: tracking, API, and admin interface"
git push origin main
```

### –®–∞–≥ 2: Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç

–ü–æ—Å–ª–µ push –≤ GitHub:
1. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
2. –ù–∞—á–Ω–µ—Ç—Å—è –Ω–æ–≤—ã–π –¥–µ–ø–ª–æ–π
3. Backend –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
4. **–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏–∏**

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –¥–µ–ø–ª–æ—è

–í Railway Dashboard:
1. –û—Ç–∫—Ä–æ–π—Ç–µ **Backend Service** ‚Üí **Deployments**
2. –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
3. –û—Ç–∫—Ä–æ–π—Ç–µ **Logs**
4. –ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏:
   ```
   [STARTUP] Running migrations...
   [STARTUP] Using alembic.ini at: ...
   [STARTUP] Running alembic upgrade head...
   [STARTUP] Migrations completed
   ```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ Railway Dashboard Shell:

```bash
cd backend
python -c "
import sys
sys.path.insert(0, '.')
from app.core.database import engine
from sqlalchemy import inspect
inspector = inspect(engine)
if 'analytics_events' in inspector.get_table_names():
    print('‚úÖ –¢–∞–±–ª–∏—Ü–∞ analytics_events —Å–æ–∑–¥–∞–Ω–∞!')
    columns = [col['name'] for col in inspector.get_columns('analytics_events')]
    print(f'–ö–æ–ª–æ–Ω–∫–∏: {columns}')
else:
    print('‚ùå –¢–∞–±–ª–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!')
"
```

## üì¶ –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–¥–µ–ø–ª–æ–µ–Ω—ã

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —ç—Ç–∏ —Ñ–∞–π–ª—ã –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã:

**Backend:**
- ‚úÖ `backend/app/models/analytics.py` - –º–æ–¥–µ–ª—å
- ‚úÖ `backend/app/models/__init__.py` - —ç–∫—Å–ø–æ—Ä—Ç –º–æ–¥–µ–ª–∏
- ‚úÖ `backend/app/api/v1/analytics.py` - API endpoints
- ‚úÖ `backend/app/main.py` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–∞
- ‚úÖ `backend/alembic/versions/9c8be056d531_add_analytics_events_table.py` - –º–∏–≥—Ä–∞—Ü–∏—è

**Frontend:**
- ‚úÖ `frontend/src/pages/Analytics.tsx` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- ‚úÖ `frontend/src/services/api.ts` - –º–µ—Ç–æ–¥ trackEvent
- ‚úÖ `frontend/src/App.tsx` - –º–∞—Ä—à—Ä—É—Ç /analytics
- ‚úÖ `frontend/src/components/Layout.tsx` - —Å—Å—ã–ª–∫–∞ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚úÖ `frontend/src/pages/Login.tsx` - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ª–æ–≥–∏–Ω–∞
- ‚úÖ `frontend/src/App.tsx` - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**VK Bot:**
- ‚úÖ `vk-bot/bot.py` - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

## üö® –ï—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

–ï—Å–ª–∏ –≤ –ª–æ–≥–∞—Ö –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É –º–∏–≥—Ä–∞—Ü–∏–∏, –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Railway Dashboard Shell:

```bash
cd backend
python run_migrations.py
```

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫-–ª–∏—Å—Ç

- [ ] –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –∏ –∑–∞–ø—É—à–µ–Ω—ã –≤ GitHub
- [ ] Railway –Ω–∞—á–∞–ª –Ω–æ–≤—ã–π –¥–µ–ø–ª–æ–π
- [ ] –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ "[STARTUP] Migrations completed"
- [ ] –¢–∞–±–ª–∏—Ü–∞ `analytics_events` —Å–æ–∑–¥–∞–Ω–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/analytics` –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- [ ] –°–æ–±—ã—Ç–∏—è –Ω–∞—á–∏–Ω–∞—é—Ç —Å–æ–±–∏—Ä–∞—Ç—å—Å—è

---

**–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã, –ø–æ–∫–∞ Railway –∑–∞–≤–µ—Ä—à–∏—Ç –¥–µ–ø–ª–æ–π –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç backend.

