# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ –∑–∞–¥–∞–Ω–∏—è—Ö

## –ß—Ç–æ —ç—Ç–æ?

–ë–æ—Ç –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ:
- –¢–µ–∫—É—â–µ–º —Å—Ç–∞—Ç—É—Å–µ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ (—Å—Ç—Ä–∞–π–∫, —É—Ä–æ–≤–µ–Ω—å, —Å–µ—Ä–¥—Ü–µ)
- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏—è—Ö –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
- –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –æ—Ç –õ—é—Å–∏

## –¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞–Ω–∏—è

1. **üí∏ –ó–∞–ø–∏—à–∏ —Ç—Ä–∞—Ç—É** - 10 XP
2. **üí∞ –ó–∞–ø–∏—à–∏ –¥–æ—Ö–æ–¥** - 15 XP
3. **üìä –ü—Ä–æ–≤–µ—Ä—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** - 5 XP
4. **üí≥ –ü—Ä–æ–≤–µ—Ä—å –±–∞–ª–∞–Ω—Å** - 5 XP

## –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—Ç–ø—Ä–∞–≤–∫—É

### –í–∞—Ä–∏–∞–Ω—Ç 1: Railway Scheduler (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –í Railway —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å —Ç–∏–ø–∞ "Scheduler"
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00 UTC)
3. –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
   ```bash
   python backend/scripts/send_daily_reminders.py
   ```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Cron Job (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

–î–æ–±–∞–≤—å—Ç–µ –≤ crontab:
```bash
# –û—Ç–ø—Ä–∞–≤–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00 UTC
0 9 * * * cd /path/to/finance-manager && python backend/scripts/send_daily_reminders.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: Celery Beat (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Celery)

–î–æ–±–∞–≤—å—Ç–µ –≤ `backend/app/celery_app.py`:
```python
from celery.schedules import crontab

celery_app.conf.beat_schedule = {
    'send-daily-reminders': {
        'task': 'app.api.v1.gamification_notifications.send_daily_reminders_task',
        'schedule': crontab(hour=9, minute=0),  # –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00 UTC
    },
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 4: –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ API

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç:
```bash
POST /api/v1/gamification/send-daily-reminders
Authorization: Bearer <admin_token>
```

## –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è

–ü—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–ª—É—á–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:

```
–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, –ò–≤–∞–Ω! –¢—ã –Ω–∞ 12-–π –¥–µ–Ω—å. –õ—é—Å—è –∂–¥—ë—Ç —Ç–µ–±—è. ‚ù§Ô∏è

üî• –°—Ç—Ä–∞–π–∫: 12 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥
‚≠ê –£—Ä–æ–≤–µ–Ω—å: 5
‚ù§Ô∏è –°–µ—Ä–¥—Ü–µ: 80/100

üéØ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è:
1. üí∏ –ó–∞–ø–∏—à–∏ —Ç—Ä–∞—Ç—É (+10 XP)
2. üí∞ –ó–∞–ø–∏—à–∏ –¥–æ—Ö–æ–¥ (+15 XP)
3. üìä –ü—Ä–æ–≤–µ—Ä—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (+5 XP)

–í—ã–ø–æ–ª–Ω—è–π –∑–∞–¥–∞–Ω–∏—è, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å XP –∏ –ø–æ–¥–Ω—è—Ç—å —É—Ä–æ–≤–µ–Ω—å! üöÄ
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- `TELEGRAM_BOT_TOKEN` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è Telegram-–±–æ—Ç–æ–≤
- `VK_BOT_TOKEN` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è VK-–±–æ—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å `telegram_id` –∏–ª–∏ `vk_id` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤:
- –£—Å–ø–µ—à–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–∫–∏: `INFO` —É—Ä–æ–≤–µ–Ω—å
- –û—à–∏–±–∫–∏: `ERROR` —É—Ä–æ–≤–µ–Ω—å —Å –¥–µ—Ç–∞–ª—è–º–∏

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ 9:00 UTC. –ß—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è:

1. **Railway Scheduler**: –ò–∑–º–µ–Ω–∏—Ç–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–µ—Ä–≤–∏—Å–∞
2. **Cron**: –ò–∑–º–µ–Ω–∏—Ç–µ –≤—Ä–µ–º—è –≤ crontab (—Ñ–æ—Ä–º–∞—Ç: `–º–∏–Ω—É—Ç–∞ —á–∞—Å –¥–µ–Ω—å –º–µ—Å—è—Ü –¥–µ–Ω—å_–Ω–µ–¥–µ–ª–∏`)
3. **Celery Beat**: –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `crontab()` –≤ –∫–æ–¥–µ

## –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

–ß—Ç–æ–±—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è:
- –£–¥–∞–ª–∏—Ç–µ –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∑–∞–¥–∞—á—É –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏
- –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ñ–ª–∞–≥ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç–µ —Ç–∞–∫—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)






