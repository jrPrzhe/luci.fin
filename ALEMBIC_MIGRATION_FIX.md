# Исправление проблемы с миграциями Alembic

## Проблема

Alembic не может найти ревизию `a920226c4581`, хотя файл существует. В БД записана эта ревизия, но Alembic не может её загрузить.

## Решение

### Вариант 1: Обновить ревизию в БД на правильную

Проверьте текущую ревизию в БД:

```bash
psql -h 195.43.142.121 -U finance_user -d finance_db -c "SELECT * FROM alembic_version;"
```

Если ревизия не совпадает с последней миграцией, обновите её:

```bash
# Найдите последнюю ревизию в файлах миграций
# Затем обновите в БД:
psql -h 195.43.142.121 -U finance_user -d finance_db -c "UPDATE alembic_version SET version_num = 'a920226c4581';"
```

### Вариант 2: Удалить запись и пересоздать

```bash
psql -h 195.43.142.121 -U finance_user -d finance_db -c "DELETE FROM alembic_version;"
```

Затем при следующем запуске Alembic создаст новую запись на основе текущей схемы БД.

### Вариант 3: Пропустить миграции (если схема БД уже актуальна)

Добавьте в Railway переменную окружения:
- `SKIP_MIGRATIONS=true`

Это отключит автоматическое выполнение миграций при старте.

## Важно

**Приложение уже работает!** Ошибка миграции не критична, так как:
- Схема БД уже актуальна (все проверки прошли успешно)
- Приложение успешно запустилось
- Все роутеры подключены

Исправление миграций можно сделать позже, это не влияет на работу приложения.










