# Быстрое исправление 502 Bad Gateway

## Проблема

Бэкенд не запускается, возвращает 502 Bad Gateway. Логи показывают "connection refused" и "Starting Container".

## Возможные причины

1. **DATABASE_URL неверный или БД недоступна**
2. **Ошибка при импорте модулей**
3. **Отсутствие обязательных переменных окружения**

## Быстрое решение

### Шаг 1: Проверьте DATABASE_URL в Railway

1. Railway → Backend → Variables
2. Найдите `DATABASE_URL`
3. Убедитесь, что значение:
   ```
   postgresql://finance_user:ваш_пароль@195.43.142.121:5432/finance_db
   ```
4. Проверьте, что пароль правильный (без лишних символов)

### Шаг 2: Проверьте доступность БД

```bash
# С вашего компьютера
psql -h 195.43.142.121 -U finance_user -d finance_db -c "SELECT 1;"
```

Если не подключается - проблема в БД или сети.

### Шаг 3: Проверьте логи Railway

1. Railway → Backend → **Deployments**
2. Откройте последний деплой
3. Перейдите в **Logs**
4. Ищите ошибки:
   - `OperationalError` - проблема с подключением к БД
   - `ImportError` - проблема с импортом модулей
   - `SyntaxError` - синтаксическая ошибка
   - `AttributeError` - проблема с кодом

### Шаг 4: Перезапустите сервис

1. Railway → Backend → Settings
2. Нажмите **"Restart"**

### Шаг 5: Откат к предыдущему деплою (если не помогло)

1. Railway → Backend → **Deployments**
2. Найдите последний рабочий деплой (до появления 502)
3. Нажмите **"Redeploy"**

## Проверка переменных окружения

Убедитесь, что в Railway установлены:

- ✅ `DATABASE_URL` - правильный URL к БД
- ✅ `SECRET_KEY` - секретный ключ для JWT
- ✅ `ADMIN_TELEGRAM_IDS` - опционально, но должен быть валидным JSON или пустым

## Типичные ошибки

### OperationalError: could not connect to server
**Причина:** БД недоступна или DATABASE_URL неверный
**Решение:** Проверьте DATABASE_URL и доступность БД

### ImportError: cannot import name 'X'
**Причина:** Проблема с импортом модулей
**Решение:** Проверьте последние изменения в коде

### SyntaxError
**Причина:** Синтаксическая ошибка в Python
**Решение:** Проверьте синтаксис в измененных файлах

## Что делать прямо сейчас

1. **Проверьте логи Railway** - там должна быть конкретная ошибка
2. **Проверьте DATABASE_URL** - убедитесь, что он правильный
3. **Попробуйте перезапустить** сервис
4. **Если не помогло** - откатитесь к предыдущему деплою

## Проверка логов в реальном времени

Railway → Backend → **Logs** → обновите страницу и ищите ошибки Python.













