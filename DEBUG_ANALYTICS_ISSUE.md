# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π

## –ü—Ä–æ–±–ª–µ–º–∞
- –û—à–∏–±–∫–∞: HTML –≤–º–µ—Å—Ç–æ JSON (—Å—Ç–∞—Ç—É—Å 200)
- –ü—Ä–æ–ø–∞–ª–∏ –ª–æ–≥–∏ backend –≤ Railway

## üîß –®–∞–≥–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å Backend –≤ Railway

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Railway Dashboard](https://railway.app)
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç ‚Üí Backend Service
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - ‚úÖ **Status** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å "Running" (–∑–µ–ª–µ–Ω—ã–π)
   - ‚úÖ **Deployments** - –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å–ø–µ—à–Ω—ã–º
   - ‚ùå –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å "Failed" –∏–ª–∏ "Stopped" - –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Backend

–í Railway Dashboard:
1. Backend Service ‚Üí **Deployments** ‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
2. –û—Ç–∫—Ä–æ–π—Ç–µ **Logs**
3. –ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏:
   - `ERROR importing routers` - –ø—Ä–æ–±–ª–µ–º–∞ —Å –∏–º–ø–æ—Ä—Ç–æ–º
   - `ERROR including routers` - –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π —Ä–æ—É—Ç–µ—Ä–æ–≤
   - `ModuleNotFoundError` - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –º–æ–¥—É–ª—å
   - `AttributeError` - –æ—à–∏–±–∫–∞ –≤ –∫–æ–¥–µ

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–æ—É—Ç–µ—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω

–í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∏:
```
[STARTUP] Routers imported
[STARTUP] Including routers...
[STARTUP] All routers included, application ready!
```

–ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ `analytics` - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `backend/app/api/v1/analytics.py`

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API endpoint

–ß–µ—Ä–µ–∑ Railway Dashboard Shell –∏–ª–∏ CLI:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ curl
curl -X GET "https://your-backend-url.railway.app/api/v1/analytics/stats" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json"
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON, –∞ –Ω–µ HTML.

### 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í Railway Dashboard ‚Üí Backend Service ‚Üí Variables:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- –û—Å–æ–±–µ–Ω–Ω–æ `DATABASE_URL`

### 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Backend

–ï—Å–ª–∏ backend –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:

1. –í Railway Dashboard ‚Üí Backend Service
2. –ù–∞–∂–º–∏—Ç–µ **Settings** ‚Üí **Restart**
3. –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ **Deployments** ‚Üí **Redeploy**

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

### 1. Backend –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è
- **–ü—Ä–∏–∑–Ω–∞–∫:** –ù–µ—Ç –ª–æ–≥–æ–≤, —Å—Ç–∞—Ç—É—Å "Failed"
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –æ—à–∏–±–æ–∫, –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å

### 2. –†–æ—É—Ç–µ—Ä –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
- **–ü—Ä–∏–∑–Ω–∞–∫:** 404 –∏–ª–∏ HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `analytics.router` –≤–∫–ª—é—á–µ–Ω –≤ `main.py`

### 3. –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞
- **–ü—Ä–∏–∑–Ω–∞–∫:** –û—à–∏–±–∫–∞ `ModuleNotFoundError: No module named 'app.api.v1.analytics'`
- **–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ–∞–π–ª `backend/app/api/v1/analytics.py` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∑–∞–∫–æ–º–º–∏—á–µ–Ω

### 4. –ü—Ä–æ–±–ª–µ–º–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–∏–∑–Ω–∞–∫:** –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ –ë–î
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `DATABASE_URL` –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ë–î

### 5. –ü—Ä–æ–±–ª–µ–º–∞ —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
- **–ü—Ä–∏–∑–Ω–∞–∫:** –û—à–∏–±–∫–∞ `relation "analytics_events" does not exist`
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏: `railway run python backend/run_migrations.py`

## ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Railway Dashboard Shell:

```bash
cd backend
python -c "
import sys
sys.path.insert(0, '.')
try:
    from app.api.v1 import analytics
    print('‚úÖ –ú–æ–¥—É–ª—å analytics –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ')
    print(f'‚úÖ –†–æ—É—Ç–µ—Ä: {analytics.router}')
except Exception as e:
    print(f'‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: {e}')
    import traceback
    traceback.print_exc()
"
```

## üîÑ –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ

1. **–û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π:**
   - Railway Dashboard ‚Üí Deployments
   - –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–±–æ—á–∏–π –¥–µ–ø–ª–æ–π
   - –ù–∞–∂–º–∏—Ç–µ **Redeploy**

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ –ª–æ–∫–∞–ª—å–Ω–æ:**
   ```bash
   cd backend
   python -c "from app.api.v1 import analytics; print('OK')"
   ```

3. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é:**
   ```bash
   railway run python backend/run_migrations.py
   ```

---

**–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã, –ø–æ–∫–∞ Railway –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å.


