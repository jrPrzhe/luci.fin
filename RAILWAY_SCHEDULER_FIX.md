# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏ Railway Scheduler

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Scheduler —Å–µ—Ä–≤–∏—Å–∞ –≤ Railway –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞:
```
ERROR: failed to build: failed to solve: failed to compute cache key: 
"/backend": not found
```

## –ü—Ä–∏—á–∏–Ω–∞

Railway –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–±—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑, –Ω–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–±–æ—Ä–∫–∏ –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `backend/`, –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Dockerfile.

## –†–µ—à–µ–Ω–∏–µ 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Dockerfile (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Scheduler —Å–µ—Ä–≤–∏—Å–∞ –≤ Railway:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Build**
   - –ù–∞–π–¥–∏—Ç–µ –æ–ø—Ü–∏—é **"Dockerfile Path"** –∏–ª–∏ **"Dockerfile"**
   - –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å: `backend/Dockerfile`
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π `scheduler.Dockerfile` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ **Root Directory** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–µ –≤ `backend/`)

## –†–µ—à–µ–Ω–∏–µ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Backend —Å–µ—Ä–≤–∏—Å

–í–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ Scheduler —Å–µ—Ä–≤–∏—Å–∞, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Backend —Å–µ—Ä–≤–∏—Å:

1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Backend —Å–µ—Ä–≤–∏—Å–∞:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Deploy**
   - –ù–∞–π–¥–∏—Ç–µ **"Start Command"**
   - –û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É –∑–∞–ø—É—Å–∫–∞ FastAPI –∫–∞–∫ –µ—Å—Ç—å

2. –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Ç–∏–ø–∞ "Cron" –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Railway Cron:
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å
   - –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø "Empty Service"
   - –í **Settings** ‚Üí **Deploy** ‚Üí **Start Command** —É–∫–∞–∂–∏—Ç–µ:
     ```bash
     python backend/scripts/send_daily_reminders.py
     ```
   - –í **Settings** –Ω–∞–π–¥–∏—Ç–µ **"Schedule"** –∏ —É–∫–∞–∂–∏—Ç–µ: `0 9 * * *`

## –†–µ—à–µ–Ω–∏–µ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Railway.toml

–°–æ–∑–¥–∞–π—Ç–µ –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ `railway.toml` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```toml
[build]
builder = "nixpacks"
dockerfilePath = "backend/Dockerfile"

[deploy]
startCommand = "python backend/scripts/send_daily_reminders.py"
healthcheckPath = "/"
healthcheckTimeout = 100

[scheduler]
schedule = "0 9 * * *"
```

## –†–µ—à–µ–Ω–∏–µ 4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Nixpacks –≤–º–µ—Å—Ç–æ Dockerfile

Railway –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å Python –ø—Ä–æ–µ–∫—Ç —á–µ—Ä–µ–∑ Nixpacks:

1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Scheduler:
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ **Builder** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ **"Nixpacks"** (–Ω–µ Docker)
   - –£–∫–∞–∂–∏—Ç–µ **Root Directory** –∫–∞–∫ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
   - –í **Start Command** —É–∫–∞–∂–∏—Ç–µ: `python backend/scripts/send_daily_reminders.py`

2. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `backend/requirements.txt`

## –†–µ—à–µ–Ω–∏–µ 5: –ü—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç-–æ–±–µ—Ä—Ç–∫–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `send_reminders.sh` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
#!/bin/bash
cd backend
python scripts/send_daily_reminders.py
```

–ò –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –∫–∞–∫ Start Command: `bash send_reminders.sh`

## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

**–î–ª—è Scheduler —Å–µ—Ä–≤–∏—Å–∞:**

1. **Service Type:** Empty Service –∏–ª–∏ Cron
2. **Root Directory:** `/` (–∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞)
3. **Builder:** Nixpacks (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)
4. **Start Command:** `python backend/scripts/send_daily_reminders.py`
5. **Schedule:** `0 9 * * *` (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
6. **Variables:** –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ Backend —Å–µ—Ä–≤–∏—Å–∞:
   - `DATABASE_URL`
   - `TELEGRAM_BOT_TOKEN`
   - `VK_BOT_TOKEN` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - `GOOGLE_AI_API_KEY` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
1. –û—Ç–∫—Ä–æ–π—Ç–µ Scheduler —Å–µ—Ä–≤–∏—Å
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Logs**
3. –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
   ```
   üöÄ Sending daily reminders to all users...
   ‚úÖ Daily reminders sent to X users
   ```

## –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ - –≤—ã–∑—ã–≤–∞–π—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, cron-job.org) –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Railway Cron (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –≤–∞—à–µ–º –ø–ª–∞–Ω–µ).






