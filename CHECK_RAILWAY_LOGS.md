# Как проверить логи Railway для диагностики 502

## Шаг 1: Откройте логи деплоя

1. Откройте https://railway.app
2. Выберите ваш проект
3. Откройте **Backend сервис**
4. Перейдите в **Deployments**
5. Откройте последний деплой (самый верхний)
6. Нажмите на **"View Logs"** или откройте вкладку **"Logs"**

## Шаг 2: Ищите ошибки

В логах ищите:

### Python ошибки:
- `Traceback (most recent call last):`
- `ImportError:`
- `SyntaxError:`
- `OperationalError:`
- `AttributeError:`

### Проблемы с БД:
- `could not connect to server`
- `connection refused`
- `timeout`
- `authentication failed`

### Проблемы с переменными:
- `KeyError:`
- `ValueError:`

## Шаг 3: Проверьте переменные окружения

1. Railway → Backend → **Variables**
2. Проверьте наличие и значения:
   - `DATABASE_URL` - должен быть `postgresql://finance_user:пароль@195.43.142.121:5432/finance_db`
   - `SECRET_KEY` - должен быть установлен
   - `ADMIN_TELEGRAM_IDS` - опционально

## Шаг 4: Проверьте доступность БД

```bash
# С вашего компьютера
psql -h 195.43.142.121 -U finance_user -d finance_db -c "SELECT 1;"
```

Если не подключается - проблема в БД или сети.

## Типичные ошибки и решения

### 1. OperationalError: could not connect to server

**Причина:** БД недоступна или DATABASE_URL неверный

**Решение:**
- Проверьте DATABASE_URL в Railway
- Проверьте доступность БД: `psql -h 195.43.142.121 -U finance_user -d finance_db`
- Проверьте пароль в DATABASE_URL

### 2. ImportError: cannot import name 'X'

**Причина:** Проблема с импортом модулей

**Решение:**
- Проверьте последние изменения в коде
- Убедитесь, что все импорты правильные

### 3. SyntaxError: invalid syntax

**Причина:** Синтаксическая ошибка в Python

**Решение:**
- Проверьте синтаксис в последних измененных файлах
- Используйте `python -m py_compile файл.py` для проверки

### 4. AttributeError: 'X' object has no attribute 'Y'

**Причина:** Проблема с кодом

**Решение:**
- Проверьте последние изменения
- Убедитесь, что все методы и атрибуты существуют

## Быстрое решение

Если логи показывают только "Starting Container" и больше ничего:

1. **Проверьте DATABASE_URL** - возможно, он неверный
2. **Попробуйте перезапустить** сервис
3. **Откатитесь к предыдущему деплою**, если проблема появилась после последних изменений

## Что делать сейчас

1. Откройте Railway → Backend → Deployments → последний деплой → Logs
2. Скопируйте все ошибки из логов
3. Пришлите их мне для анализа

Или попробуйте:
1. Проверить DATABASE_URL в Railway
2. Перезапустить сервис
3. Откатиться к предыдущему деплою





