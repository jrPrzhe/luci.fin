# VK Bot для Finance Manager

Чат-бот для ВКонтакте с функционалом управления финансами, аналогичным Telegram боту.

## Функционал

- ✅ `/start` или `начать` - приветствие и список команд
- ✅ `/help` или `помощь` - справка по командам
- ✅ `/balance` или `баланс` - текущий баланс
- ✅ `/transactions` или `транзакции` - последние транзакции
- ⏳ `/expense` или `расход` - добавить расход (в разработке)
- ⏳ `/income` или `доход` - добавить доход (в разработке)
- ⏳ `/report` или `отчет` - AI-отчет (в разработке)
- ⏳ `/goal` или `цель` - создать финансовую цель (в разработке)
- ⏳ `/language` или `язык` - изменить язык (в разработке)

## Установка

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Создайте файл `.env`:
```env
VK_BOT_TOKEN=your_vk_bot_token
BACKEND_URL=http://localhost:8000
VK_GROUP_ID=your_group_id
```

3. Запустите бота:
```bash
python bot.py
```

## Настройка VK бота

### Важно: Токен сообщества

Для работы бота нужен **токен сообщества (community token)**, а не пользовательский токен!

### Шаги настройки:

1. **Создайте сообщество в ВК** (если еще не создано)

2. **Получите токен сообщества:**
   - Перейдите в "Управление" → "Работа с API"
   - Нажмите "Создать ключ"
   - Выберите права доступа:
     - ✅ Управление сообществом
     - ✅ Сообщения сообщества
   - Скопируйте полученный токен

3. **Включите Long Poll API:**
   - Перейдите в "Управление" → "Работа с API" → "Long Poll API"
   - Включите "Long Poll API"
   - Сохраните настройки

4. **Получите ID сообщества:**
   - В настройках сообщества найдите "ID сообщества" (число, может быть отрицательным)
   - Или используйте URL: `vk.com/club123456` → ID = `123456`

5. **Установите переменные окружения:**
   - `VK_BOT_TOKEN` = токен сообщества (не пользовательский!)
   - `VK_GROUP_ID` = ID вашего сообщества (только число, без минуса)
   - `BACKEND_URL` = URL вашего backend API

## Структура проекта

```
vk-bot/
├── bot.py              # Основной файл бота
├── locales/            # Локализации
│   ├── ru.py          # Русский язык
│   └── en.py          # Английский язык
├── requirements.txt    # Зависимости
└── README.md          # Документация
```

## API Backend

Бот использует следующие endpoints:
- `POST /api/v1/auth/bot-token-vk` - получение токена по vk_id
- `GET /api/v1/auth/me` - информация о пользователе
- `GET /api/v1/accounts/balance` - баланс
- `GET /api/v1/transactions/` - транзакции

## Примечания

- Бот автоматически создает пользователя, если его нет в базе данных
- Токены кешируются и автоматически обновляются при истечении
- Поддерживается два языка: русский и английский

